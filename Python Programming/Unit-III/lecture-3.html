<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 3: Exception Handling - Python Programming</title>
    <meta name="description" content="Exception Handling (try, except, else, finally), Handling Multiple Exceptions, raise, assert">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .code {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .note {
            background-color: #e7f3fe;
            border-left: 6px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
        }
        .warning {
            background-color: #fff3cd;
            border-left: 6px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
        .danger {
            background-color: #f8d7da;
            border-left: 6px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .try-block {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 10px;
            margin: 10px 0;
        }
        .except-block {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 10px;
            margin: 10px 0;
        }
        .else-block {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 10px;
            margin: 10px 0;
        }
        .finally-block {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="../../index.html" class="logo">
                <img src="../../images/icon.jpg" alt="University Logo" style="height: 40px;">
                <div class="logo-text">
                    <span class="logo-main">Mohsin Furkh Dar</span>
                    <span class="logo-sub">PhD Candidate</span>
                </div>
            </a>
            <button class="menu-toggle" aria-label="Toggle navigation" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <ul id="mainNav">
                <li><a href="../../index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="../../index.html#courses"><i class="fas fa-book"></i> Courses</a></li>
                <li><a href="../../index.html#lecture-notes"><i class="fas fa-file-alt"></i> Lecture Notes</a></li>
                <li><a href="../../index.html#presentations"><i class="fas fa-chalkboard-teacher"></i> Presentations</a></li>
                <li><a href="../../index.html#mcqs"><i class="fas fa-question-circle"></i> MCQs</a></li>
                <li><a href="../../index.html#research"><i class="fas fa-flask"></i> Research</a></li>
                <li><a href="../../index.html#contact"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <main>
            <section class="lecture-content">
                <h1>Lecture 3: Exception Handling in Python</h1>
                
                <div class="lecture-section">
                    <h2>1. The <code>try</code>-<code>except</code> Block</h2>
                    
                    <div class="try-block">
                        <h4>Basic Syntax</h4>
                        <div class="code">
                            try:
                                # Code that might raise an exception
                                result = 10 / 0  # This will raise a ZeroDivisionError
                            except ZeroDivisionError as e:
                                # Code to handle the exception
                                print(f"Error: {e}")
                                result = float('inf')  # Default value
                        </div>
                    </div>
                    
                    <div class="note">
                        <h4>How it works:</h4>
                        <ol>
                            <li>Python executes the code in the <code>try</code> block.</li>
                            <li>If an exception occurs, the rest of the <code>try</code> block is skipped.</li>
                            <li>If the exception type matches the one specified after <code>except</code>, the except block is executed.</li>
                            <li>If no exception occurs, the <code>except</code> block is skipped.</li>
                        </ol>
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>2. Handling Multiple Exceptions</h2>
                    
                    <div class="code">
                        def divide_numbers(a, b):
                            try:
                                result = a / b
                                print(f"{a} / {b} = {result}")
                            except ZeroDivisionError:
                                print("Error: Division by zero is not allowed!")
                            except TypeError:
                                print("Error: Both arguments must be numbers!")
                            except Exception as e:
                                print(f"An unexpected error occurred: {e}")
                        
                        # Test cases
                        divide_numbers(10, 2)    # Valid division
                        divide_numbers(10, 0)    # ZeroDivisionError
                        divide_numbers("10", 2)  # TypeError
                    </div>
                    
                    <h3>Handling Multiple Exceptions in a Single Block</h3>
                    <div class="code">
                        try:
                            # Code that might raise exceptions
                            value = int("not_a_number")
                            result = 10 / value
                        except (ValueError, ZeroDivisionError) as e:
                            print(f"Error: {e.__class__.__name__} - {e}")
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>3. The <code>else</code> and <code>finally</code> Clauses</h2>
                    
                    <h3>The <code>else</code> Block</h3>
                    <div class="else-block">
                        <p>Code in the <code>else</code> block runs only if no exceptions were raised in the <code>try</code> block.</p>
                        <div class="code">
                            def process_file(filename):
                                try:
                                    with open(filename, 'r') as file:
                                        data = file.read()
                                except FileNotFoundError:
                                    print(f"Error: {filename} not found!")
                                else:
                                    # This runs only if no exception occurred
                                    print(f"Successfully read {len(data)} characters from {filename}")
                                    return data
                        </div>
                    </div>
                    
                    <h3>The <code>finally</code> Block</h3>
                    <div class="finally-block">
                        <p>Code in the <code>finally</code> block always runs, whether an exception occurred or not.</p>
                        <div class="code">
                            def divide_with_finally(a, b):
                                try:
                                    result = a / b
                                    print(f"Result: {result}")
                                    return result  # This return is delayed until finally completes
                                except ZeroDivisionError:
                                    print("Error: Cannot divide by zero!")
                                    return None    # This return is also delayed
                                finally:
                                    # This always runs, even if there's a return statement
                                    print("Division operation completed")
                            
                            # Test the function
                            divide_with_finally(10, 2)
                            divide_with_finally(10, 0)
                        </div>
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>4. Raising Exceptions</h2>
                    
                    <p>You can raise exceptions using the <code>raise</code> statement.</p>
                    
                    <h3>Raising Built-in Exceptions</h3>
                    <div class="code">
                        def validate_age(age):
                            if age < 0:
                                raise ValueError("Age cannot be negative!")
                            if age > 120:
                                raise ValueError("Age seems unrealistic!")
                            return True
                        
                        # Test the function
                        try:
                            validate_age(25)  # Valid
                            validate_age(-5)  # Raises ValueError
                        except ValueError as e:
                            print(f"Validation error: {e}")
                    </div>
                    
                    <h3>Re-raising Exceptions</h3>
                    <div class="code">
                        def process_data(data):
                            try:
                                # Some processing that might fail
                                result = int(data)
                                return result * 2
                            except ValueError as e:
                                print("Error in process_data:", e)
                                # Re-raise the exception to be handled by the caller
                                raise
                        
                        try:
                            process_data("123")    # Valid
                            process_data("abc")    # Will raise ValueError
                        except ValueError as e:
                            print(f"Caught in main: {e}")
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>5. The <code>assert</code> Statement</h2>
                    
                    <p>The <code>assert</code> statement is used for debugging and testing. It raises an <code>AssertionError</code> if the condition is <code>False</code>.</p>
                    
                    <div class="code">
                        def calculate_average(scores):
                            # Precondition: scores is not empty
                            assert len(scores) > 0, "Scores list cannot be empty"
                            
                            # Precondition: all scores are between 0 and 100
                            for score in scores:
                                assert 0 <= score <= 100, f"Invalid score: {score}. Must be between 0 and 100"
                            
                            average = sum(scores) / len(scores)
                            
                            # Postcondition: average is between 0 and 100
                            assert 0 <= average <= 100, "Average is out of expected range"
                            
                            return average
                        
                        # Test cases
                        print(calculate_average([85, 90, 78, 92]))  # Valid
                        # print(calculate_average([]))              # AssertionError: Scores list cannot be empty
                        # print(calculate_average([85, 110, 78]))   # AssertionError: Invalid score: 110
                    </div>
                    
                    <div class="warning">
                        <h4>Important Note:</h4>
                        <p>Assertions can be disabled by running Python with the <code>-O</code> (optimize) flag. They should be used for debugging and testing, not for handling expected error conditions in production code.</p>
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>6. Creating Custom Exceptions</h2>
                    
                    <p>You can create custom exceptions by subclassing the <code>Exception</code> class.</p>
                    
                    <div class="code">
                        class InvalidEmailError(Exception):
                            """Raised when an email address is invalid."""
                            pass
                        
                        class InvalidAgeError(Exception):
                            """Raised when age is invalid."""
                            def __init__(self, age, message="Age must be between 0 and 120"):
                                self.age = age
                                self.message = message
                                super().__init__(self.message)
                        
                        def validate_user(email, age):
                            if "@" not in email or "." not in email:
                                raise InvalidEmailError(f"Invalid email format: {email}")
                            
                            if not (0 <= age <= 120):
                                raise InvalidAgeError(age)
                            
                            print(f"User {email} is valid")
                        
                        # Test the function
                        try:
                            validate_user("user@example.com", 25)  # Valid
                            validate_user("invalid-email", 25)     # Raises InvalidEmailError
                            validate_user("user@example.com", 150) # Raises InvalidAgeError
                        except (InvalidEmailError, InvalidAgeError) as e:
                            print(f"Validation error: {e}")
                    </div>
                </div>

                <div class="lecture-section">
                    <h2>7. Practical Example: File Processing with Error Handling</h2>
                    
                    <div class="code">
                        import json
                        from datetime import datetime
                        
                        class DataProcessingError(Exception):
                            """Base exception for data processing errors."""
                            pass
                        
                        class InvalidDataError(DataProcessingError):
                            """Raised when data format is invalid."""
                            pass
                        
                        class DataProcessor:
                            def __init__(self, input_file, output_file):
                                self.input_file = input_file
                                self.output_file = output_file
                                self.processed_count = 0
                                self.error_count = 0
                            
                            def process_data(self, data):
                                """Process a single data record."""
                                try:
                                    # Validate required fields
                                    required_fields = ['id', 'name', 'value']
                                    for field in required_fields:
                                        if field not in data:
                                            raise InvalidDataError(f"Missing required field: {field}")
                                    
                                    # Validate data types
                                    if not isinstance(data['id'], int) or data['id'] <= 0:
                                        raise InvalidDataError("ID must be a positive integer")
                                    
                                    if not isinstance(data['name'], str) or not data['name'].strip():
                                        raise InvalidDataError("Name must be a non-empty string")
                                    
                                    # Add processing timestamp
                                    data['processed_at'] = datetime.now().isoformat()
                                    self.processed_count += 1
                                    return data
                                    
                                except Exception as e:
                                    self.error_count += 1
                                    if not isinstance(e, DataProcessingError):
                                        e = DataProcessingError(f"Error processing record: {e}")
                                    print(f"Error: {e}")
                                    return None
                            
                            def run(self):
                                """Process all records in the input file."""
                                try:
                                    # Read input file
                                    with open(self.input_file, 'r') as f:
                                        try:
                                            data = json.load(f)
                                        except json.JSONDecodeError as e:
                                            raise InvalidDataError(f"Invalid JSON: {e}")
                                    
                                    # Process each record
                                    processed_data = []
                                    for record in data:
                                        result = self.process_data(record)
                                        if result is not None:
                                            processed_data.append(result)
                                    
                                    # Write output file
                                    with open(self.output_file, 'w') as f:
                                        json.dump(processed_data, f, indent=2)
                                    
                                    # Print summary
                                    print(f"Processing complete!")
                                    print(f"Successfully processed: {self.processed_count} records")
                                    print(f"Errors encountered: {self.error_count}")
                                    
                                except FileNotFoundError as e:
                                    print(f"Error: Input file not found: {self.input_file}")
                                except PermissionError as e:
                                    print(f"Error: Permission denied when accessing file: {e.filename}")
                                except Exception as e:
                                    print(f"Unexpected error: {e}")
                                    raise  # Re-raise unexpected errors
                        
                        # Example usage
                        if __name__ == "__main__":
                            import sys
                            
                            if len(sys.argv) != 3:
                                print(f"Usage: {sys.argv[0]} <input_file> <output_file>")
                                sys.exit(1)
                            
                            processor = DataProcessor(sys.argv[1], sys.argv[2])
                            processor.run()
                    </div>
                </div>
            </section>

            <div class="lecture-navigation">
                <a href="lecture-2.html" class="btn-prev"><i class="fas fa-arrow-left"></i> Previous</a>
                <a href="lecture-4.html" class="btn-next">Next <i class="fas fa-arrow-right"></i></a>
            </div>
        </main>
    </div>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../index.html#courses">Courses</a></li>
                    <li><a href="../../index.html#lecture-notes">Lecture Notes</a></li>
                    <li><a href="../../index.html#presentations">Presentations</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Connect</h4>
                <div class="social-links">
                    <a href="https://scholar.google.com" target="_blank" aria-label="Google Scholar"><i class="fab fa-google scholar-icon"></i></a>
                    <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    <a href="https://github.com" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Dr. Mohsin Furkh Dar. All rights reserved.</p>
        </div>
    </footer>

    <script src="../../js/script.js"></script>
</body>
</html>
