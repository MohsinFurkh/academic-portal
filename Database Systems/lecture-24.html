<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Fragmentation in Distributed Databases</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            color: #333;
        }

        .presentation {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            position: absolute;
            width: 90%;
            max-width: 1200px;
            height: 85vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 60px;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow-y: auto;
        }

        .slide.active {
            opacity: 1;
            transform: translateX(0);
        }

        .slide.prev {
            transform: translateX(-100%);
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 20px;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
        }

        h2 {
            color: #764ba2;
            font-size: 2em;
            margin: 30px 0 20px 0;
        }

        h3 {
            color: #667eea;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        p, li {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 15px;
            color: #444;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-top: 10px;
        }

        .instructor-info {
            margin-top: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }

        .fragmentation-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .frag-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .frag-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .example-box {
            background: #f8f9fa;
            border-left: 4px solid #764ba2;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .table-visual {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .table-visual th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .table-visual td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        .table-visual tr:hover {
            background: #f5f5f5;
        }

        .controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .slide-counter {
            position: fixed;
            top: 30px;
            right: 30px;
            background: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
            color: #667eea;
        }

        .interactive-demo {
            background: white;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .demo-button {
            background: #28a745;
            margin: 10px 5px;
            padding: 10px 20px;
            font-size: 0.9em;
        }

        .demo-result {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            min-height: 60px;
            font-family: monospace;
        }

        ul {
            margin-left: 25px;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.85em;
            font-weight: bold;
            background: #eef2ff;
            color: #4a5568;
            margin-right: 8px;
            margin-top: 6px;
        }

        .diagram {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 18px;
            margin: 18px 0;
        }

        .diagram-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .advantages {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        .disadvantages {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        @media (max-width: 768px) {
            .slide {
                padding: 30px;
                height: 90vh;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.5em;
            }
            
            .controls {
                bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="presentation">
        <!-- Slide 1: Title -->
        <div class="slide active" data-slide="1">
            <h1>Data Fragmentation in Distributed Databases</h1>
            <p class="subtitle">Understanding Data Distribution Strategies</p>
            <div class="instructor-info">
                <h3 style="color: white; margin: 0;">Instructor: Mohsin F. Dar</h3>
                <p style="margin: 10px 0; color: #f0f0f0;">Assistant Professor, Cloud & Software Operations Cluster | SOCS | UPES</p>
                <p style="margin: 5px 0; color: #f0f0f0;">Course: Database Systems | M.Tech. First Semester</p>
            </div>
            <div style="margin-top: 50px; text-align: center;">
                <p style="font-size: 1.3em; color: #667eea; font-weight: bold;">Press Next to Begin →</p>
            </div>
        </div>

    

        <!-- Slide 3: Data Fragmentation Concept -->
        <div class="slide" data-slide="3">
            <h1>Data Fragmentation: Core Concept</h1>
            <h2>What is Data Fragmentation?</h2>
            <p>Data fragmentation is the process of <span class="highlight">dividing a relation into smaller fragments</span> and storing these fragments at different sites in a distributed database system.</p>

            <h3>Objectives of Fragmentation:</h3>
            <div class="example-box advantages">
                <p><strong>1. Locality of Reference:</strong> Data is stored close to where it's most frequently used</p>
                <p><strong>2. Improved Performance:</strong> Parallel query execution on fragments</p>
                <p><strong>3. Reduced Communication Costs:</strong> Minimize data transfer across network</p>
                <p><strong>4. Enhanced Availability:</strong> Failure of one site doesn't affect all data</p>
                <p><strong>5. Load Balancing:</strong> Distribute workload across multiple sites</p>
            </div>

            <h3>Fundamental Rule:</h3>
            <div class="example-box">
                <p style="font-size: 1.2em; font-weight: bold; color: #667eea;">
                    Fragments must be COMPLETE and RECONSTRUCTIBLE
                </p>
                <p>• <strong>Completeness:</strong> All data in the original relation must appear in at least one fragment</p>
                <p>• <strong>Reconstruction:</strong> Must be able to recreate the original relation from fragments</p>
                <p>• <strong>Disjointness:</strong> (Optional) Data items should appear in only one fragment</p>
            </div>
        </div>

        <!-- Slide 4: Types of Fragmentation -->
        <div class="slide" data-slide="4">
            <h1>Types of Data Fragmentation</h1>
            <div class="fragmentation-types">
                <div class="frag-card">
                    <h3 style="margin: 0 0 15px 0;">1. Horizontal Fragmentation</h3>
                    <p>Divides relation by rows (tuples)</p>
                    <p style="color: #667eea; font-weight: bold;">Each fragment contains a subset of rows</p>
                </div>
                <div class="frag-card">
                    <h3 style="margin: 0 0 15px 0;">2. Vertical Fragmentation</h3>
                    <p>Divides relation by columns (attributes)</p>
                    <p style="color: #667eea; font-weight: bold;">Each fragment contains a subset of columns</p>
                </div>
                <div class="frag-card">
                    <h3 style="margin: 0 0 15px 0;">3. Mixed (Hybrid) Fragmentation</h3>
                    <p>Combination of horizontal and vertical</p>
                    <p style="color: #667eea; font-weight: bold;">Most flexible approach</p>
                </div>
            </div>

            <h3>Choosing the Right Fragmentation Strategy:</h3>
            <div class="example-box">
                <p><strong>Consider:</strong></p>
                <p>• Application access patterns</p>
                <p>• Query frequency and types</p>
                <p>• Data distribution requirements</p>
                <p>• Network bandwidth and latency</p>
                <p>• Storage capacity at each site</p>
            </div>
        </div>

        <div class="slide" data-slide="5">
            <h1>Horizontal vs Vertical vs Hybrid</h1>
            <h2>Compare & Contrast (with examples)</h2>

            <table class="table-visual">
                <tr>
                    <th>Type</th>
                    <th>Split By</th>
                    <th>Reconstruction</th>
                    <th>Typical Use</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><strong>Horizontal</strong></td>
                    <td>Rows (tuples)</td>
                    <td>UNION (∪)</td>
                    <td>Geography / campus / region-based access</td>
                    <td>Employee split by <span class="highlight">Location</span></td>
                </tr>
                <tr>
                    <td><strong>Vertical</strong></td>
                    <td>Columns (attributes)</td>
                    <td>JOIN (⋈) on PK</td>
                    <td>Different apps use different columns; security separation</td>
                    <td>Employee split into (EmpID,Name,Dept) and (EmpID,Salary)</td>
                </tr>
                <tr>
                    <td><strong>Hybrid</strong></td>
                    <td>Rows + Columns</td>
                    <td>JOIN + UNION (sequence dependent)</td>
                    <td>Complex workloads: locality + security + performance</td>
                    <td>Vertical first, then horizontal on a subset</td>
                </tr>
            </table>

            <div class="example-box">
                <h3 style="margin-top: 0;">Key idea to remember</h3>
                <p><span class="pill">Horizontal</span> keep all attributes, split tuples using predicates.</p>
                <p><span class="pill">Vertical</span> keep PK in every fragment, split non-key attributes by usage affinity.</p>
                <p><span class="pill">Hybrid</span> use when you need both locality (horizontal) and attribute grouping/security (vertical).</p>
            </div>
        </div>

        <div class="slide" data-slide="6">
            <h1>Case Study: University Distributed DB</h1>
            <h2>STUDENT table and fragmentation across 3 sites</h2>

            <div class="example-box">
                <p><strong>Sites:</strong> Site A (Main Campus), Site B (Engineering Campus), Site C (Medical Campus)</p>
                <p><strong>Table:</strong> STUDENT(student_id, name, department, gpa, campus_location, enrollment_year, email)</p>
            </div>

            <h3>Recommended fragmentation (Primary Horizontal by campus)</h3>
            <div class="example-box advantages">
                <p><strong>STUDENT_A</strong> = σ<sub>campus_location='Main Campus'</sub>(STUDENT)  → stored at Site A</p>
                <p><strong>STUDENT_B</strong> = σ<sub>campus_location='Engineering Campus'</sub>(STUDENT)  → stored at Site B</p>
                <p><strong>STUDENT_C</strong> = σ<sub>campus_location='Medical Campus'</sub>(STUDENT)  → stored at Site C</p>
                <p><strong>Reconstruction:</strong> STUDENT = STUDENT_A ∪ STUDENT_B ∪ STUDENT_C</p>
            </div>

            <div class="diagram">
                <div class="diagram-title">Allocation map</div>
                <table class="table-visual">
                    <tr>
                        <th>Fragment</th>
                        <th>Predicate</th>
                        <th>Stored at</th>
                        <th>Reason</th>
                    </tr>
                    <tr>
                        <td>STUDENT_A</td>
                        <td>campus_location='Main Campus'</td>
                        <td>Site A</td>
                        <td>Max locality for Main Campus operations</td>
                    </tr>
                    <tr>
                        <td>STUDENT_B</td>
                        <td>campus_location='Engineering Campus'</td>
                        <td>Site B</td>
                        <td>Engineering admin and apps are local</td>
                    </tr>
                    <tr>
                        <td>STUDENT_C</td>
                        <td>campus_location='Medical Campus'</td>
                        <td>Site C</td>
                        <td>Medical campus workloads stay local</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="slide" data-slide="7">
            <h1>Case Study: Reconstruction & Constraint Notes</h1>
            <h2>How queries and constraints behave</h2>

            <div class="example-box">
                <h3 style="margin-top: 0;">Reconstruction (Global View)</h3>
                <p style="font-family: monospace;">STUDENT = STUDENT_A ∪ STUDENT_B ∪ STUDENT_C</p>
                <p>A global query like <span class="highlight">"count students by department"</span> can execute in parallel at each site and then merge results.</p>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Primary Key (student_id) handling</h3>
                <p><strong>Goal:</strong> student_id must be unique across all sites.</p>
                <p><strong>Common solutions:</strong></p>
                <p>• Central/Global ID generator (or campus-prefixed IDs like A-1001, B-2001, C-3001)</p>
                <p>• Distributed unique ID strategies (UUID/ULID) to avoid collisions</p>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Foreign Key idea (derived fragmentation)</h3>
                <p>If a table <strong>ENROLLMENT(student_id, course_id, ...)</strong> references <strong>STUDENT(student_id)</strong>, then fragment ENROLLMENT based on STUDENT fragments:</p>
                <p><strong>ENROLL_A</strong> joins with STUDENT_A, stored at Site A (local FK checks)</p>
                <p><strong>ENROLL_B</strong> joins with STUDENT_B, stored at Site B</p>
                <p><strong>ENROLL_C</strong> joins with STUDENT_C, stored at Site C</p>
            </div>

            <div class="example-box disadvantages">
                <h3 style="margin-top: 0;">What to mention in exams</h3>
                <p>• Use <strong>derived horizontal fragmentation</strong> to co-locate related tuples (helps FK enforcement)</p>
                <p>• Global constraints may require coordination (e.g., distributed commit) if updates span sites</p>
            </div>
        </div>

        <!-- Slide 5: Horizontal Fragmentation -->
        <div class="slide" data-slide="8">
            <h1>Horizontal Fragmentation</h1>
            <h2>Concept & Mechanism</h2>
            <p>Horizontal fragmentation divides a relation into subsets of tuples (rows). Each fragment contains all columns but only selected rows based on a predicate.</p>

            <h3>Example: Employee Table</h3>
            <table class="table-visual">
                <tr>
                    <th>EmpID</th>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Salary</th>
                    <th>Location</th>
                </tr>
                <tr>
                    <td>101</td>
                    <td>John Smith</td>
                    <td>Sales</td>
                    <td>50000</td>
                    <td>Delhi</td>
                </tr>
                <tr>
                    <td>102</td>
                    <td>Sarah Jones</td>
                    <td>Engineering</td>
                    <td>70000</td>
                    <td>Mumbai</td>
                </tr>
                <tr>
                    <td>103</td>
                    <td>Mike Brown</td>
                    <td>Sales</td>
                    <td>55000</td>
                    <td>Delhi</td>
                </tr>
                <tr>
                    <td>104</td>
                    <td>Lisa White</td>
                    <td>HR</td>
                    <td>60000</td>
                    <td>Mumbai</td>
                </tr>
            </table>

            <h3>Fragmentation by Location:</h3>
            <p><strong>Fragment 1 (Delhi Site):</strong> σ<sub>Location='Delhi'</sub>(Employee)</p>
            <p><strong>Fragment 2 (Mumbai Site):</strong> σ<sub>Location='Mumbai'</sub>(Employee)</p>

            <div class="example-box">
                <h3 style="margin-top: 0;">Reconstruction:</h3>
                <p style="font-family: monospace;">Employee = Fragment1 ∪ Fragment2</p>
                <p>Using UNION operation to combine all fragments</p>
            </div>
        </div>

        <!-- Slide 6: Types of Horizontal Fragmentation -->
        <div class="slide" data-slide="9">
            <h1>Types of Horizontal Fragmentation</h1>
            
            <h2>1. Primary Horizontal Fragmentation</h2>
            <div class="example-box">
                <p>Based on predicates defined on the relation itself</p>
                <p><strong>Example:</strong> Fragmenting Employee table by Location attribute</p>
                <p style="font-family: monospace; margin-top: 10px;">
                    F1 = σ<sub>Location='Delhi'</sub>(Employee)<br>
                    F2 = σ<sub>Location='Mumbai'</sub>(Employee)
                </p>
            </div>

            <h2>2. Derived Horizontal Fragmentation</h2>
            <div class="example-box">
                <p>Based on predicates defined on another relation (partitioning based on a foreign key relationship)</p>
                <p><strong>Example:</strong> Fragment Project table based on Employee fragmentation</p>
                <p style="font-family: monospace; margin-top: 10px;">
                    If Employee is fragmented by Location,<br>
                    Project can be fragmented based on Manager's Location (semi-join)
                </p>
            </div>

            <h3>Advantages of Horizontal Fragmentation:</h3>
            <div class="example-box advantages">
                <p>✓ Supports parallel processing effectively</p>
                <p>✓ Simple queries access only relevant fragments</p>
                <p>✓ Natural partitioning for geographic distribution</p>
                <p>✓ Improved performance for selection queries</p>
            </div>
        </div>

        <!-- Slide 7: Vertical Fragmentation -->
        <div class="slide" data-slide="10">
            <h1>Vertical Fragmentation</h1>
            <h2>Concept & Mechanism</h2>
            <p>Vertical fragmentation divides a relation by columns (attributes). Each fragment contains a subset of attributes, but the <span class="highlight">primary key must be replicated</span> in all fragments for reconstruction.</p>

            <h3>Example: Employee Table Vertical Fragmentation</h3>
            <p><strong>Original Relation:</strong> Employee(EmpID, Name, Dept, Salary, Address, Phone)</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0;">
                <div>
                    <h3>Fragment 1 (Basic Info)</h3>
                    <table class="table-visual">
                        <tr>
                            <th>EmpID</th>
                            <th>Name</th>
                            <th>Dept</th>
                        </tr>
                        <tr><td>101</td><td>John</td><td>Sales</td></tr>
                        <tr><td>102</td><td>Sarah</td><td>Eng</td></tr>
                    </table>
                </div>
                <div>
                    <h3>Fragment 2 (Financial)</h3>
                    <table class="table-visual">
                        <tr>
                            <th>EmpID</th>
                            <th>Salary</th>
                        </tr>
                        <tr><td>101</td><td>50000</td></tr>
                        <tr><td>102</td><td>70000</td></tr>
                    </table>
                </div>
                <div>
                    <h3>Fragment 3 (Contact)</h3>
                    <table class="table-visual">
                        <tr>
                            <th>EmpID</th>
                            <th>Address</th>
                            <th>Phone</th>
                        </tr>
                        <tr><td>101</td><td>Delhi</td><td>99999</td></tr>
                        <tr><td>102</td><td>Mumbai</td><td>88888</td></tr>
                    </table>
                </div>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Reconstruction:</h3>
                <p style="font-family: monospace;">Employee = Fragment1 ⋈<sub>EmpID</sub> Fragment2 ⋈<sub>EmpID</sub> Fragment3</p>
                <p>Using NATURAL JOIN operation on primary key</p>
            </div>
        </div>

        <!-- Slide 8: Vertical Fragmentation Details -->
        <div class="slide" data-slide="11">
            <h1>Vertical Fragmentation: Deep Dive</h1>
            
            <h2>Key Principles:</h2>
            <div class="example-box">
                <p><strong>1. Primary Key Replication:</strong> Every fragment must include the primary key</p>
                <p><strong>2. Completeness:</strong> Union of all attributes in fragments = all attributes in original relation</p>
                <p><strong>3. Disjointness:</strong> Non-key attributes appear in exactly one fragment</p>
            </div>

            <h2>Maintaining Integrity Constraints across Vertical Fragments</h2>
            <div class="example-box">
                <p><strong>Primary Key (PK):</strong> The PK attribute(s) are present in every vertical fragment, but <span class="highlight">uniqueness</span> must still be enforced globally.</p>
                <p>• Enforce inserts/updates using <strong>distributed transactions</strong> so all fragments are updated atomically (e.g., 2PC at commit).</p>
                <p>• Use a <strong>global ID strategy</strong> to avoid PK collisions (central ID generator, UUID/ULID, or site-prefixed keys).</p>
            </div>

            <div class="example-box">
                <p><strong>Foreign Key (FK):</strong> A referencing table typically points to the PK of the referenced table.</p>
                <p>Common strategies in a DDBMS:</p>
                <p>• <strong>Co-location / derived fragmentation:</strong> keep referencing tuples at the same site as the referenced PK fragment to allow local FK checks.</p>
                <p>• <strong>Replicate key columns:</strong> keep a small “key directory” (PK values) where needed for validation.</p>
                <p>• <strong>Distributed referential integrity checks:</strong> validate at commit time using distributed messaging/2PC (costly but correct).</p>
            </div>

            <div class="example-box advantages">
                <h3 style="margin-top: 0;">Mini Example</h3>
                <p><strong>STUDENT_PUBLIC</strong>(student_id, name, department, campus_location)</p>
                <p><strong>STUDENT_PRIVATE</strong>(student_id, gpa, email)</p>
                <p><strong>ENROLLMENT</strong>(student_id, course_id, semester) references STUDENT_PUBLIC(student_id). If STUDENT_PUBLIC is co-located/replicated appropriately, FK checks can be local.</p>
            </div>

            <h3>When to Use Vertical Fragmentation?</h3>
            <div class="example-box advantages">
                <p>✓ Different applications access different attributes</p>
                <p>✓ Security requirements (separate sensitive data)</p>
                <p>✓ Performance optimization (frequently accessed attributes together)</p>
                <p>✓ Reduce I/O for queries needing only few attributes</p>
            </div>

            <h3>Design Considerations:</h3>
            <div class="example-box">
                <p><strong>Attribute Affinity:</strong> Group attributes accessed together</p>
                <p><strong>Access Frequency:</strong> Consider query patterns and frequency</p>
                <p><strong>Join Cost:</strong> Balance fragmentation benefits vs reconstruction overhead</p>
            </div>

            <h3>Challenges:</h3>
            <div class="example-box disadvantages">
                <p>✗ Requires join operations for reconstruction</p>
                <p>✗ Complex query processing for multi-attribute queries</p>
                <p>✗ Increased storage due to key replication</p>
            </div>
        </div>

        <!-- Slide 9: Mixed Fragmentation -->
        <div class="slide" data-slide="12">
            <h1>Mixed (Hybrid) Fragmentation</h1>
            <h2>Combining Horizontal and Vertical Fragmentation</h2>
            <p>Mixed fragmentation applies horizontal and vertical fragmentation in sequence, providing the most flexible data distribution strategy.</p>

            <h3>Two Approaches:</h3>
            <div class="fragmentation-types">
                <div class="frag-card">
                    <h3 style="margin: 0 0 15px 0;">Vertical-then-Horizontal</h3>
                    <p>1. First apply vertical fragmentation</p>
                    <p>2. Then apply horizontal fragmentation to vertical fragments</p>
                </div>
                <div class="frag-card">
                    <h3 style="margin: 0 0 15px 0;">Horizontal-then-Vertical</h3>
                    <p>1. First apply horizontal fragmentation</p>
                    <p>2. Then apply vertical fragmentation to horizontal fragments</p>
                </div>
            </div>

            <h3>Example Process:</h3>
            <div class="example-box">
                <p><strong>Step 1:</strong> Vertical fragmentation of Employee table</p>
                <p style="font-family: monospace;">E1 = π<sub>EmpID, Name, Dept</sub>(Employee)</p>
                <p style="font-family: monospace;">E2 = π<sub>EmpID, Salary, Location</sub>(Employee)</p>
                
                <p style="margin-top: 20px;"><strong>Step 2:</strong> Horizontal fragmentation of E2</p>
                <p style="font-family: monospace;">E2_Delhi = σ<sub>Location='Delhi'</sub>(E2)</p>
                <p style="font-family: monospace;">E2_Mumbai = σ<sub>Location='Mumbai'</sub>(E2)</p>
            </div>

            <h3>Benefits:</h3>
            <div class="example-box advantages">
                <p>✓ Maximum flexibility in data distribution</p>
                <p>✓ Optimizes both query performance and data locality</p>
                <p>✓ Supports complex application requirements</p>
            </div>
        </div>

        <!-- Slide 10: Interactive Demo -->
        <div class="slide" data-slide="13">
            <h1>Interactive Fragmentation Demo</h1>
            <div class="interactive-demo">
                <h3>Original Employee Table:</h3>
                <table class="table-visual" id="originalTable">
                    <tr>
                        <th>EmpID</th>
                        <th>Name</th>
                        <th>Dept</th>
                        <th>Salary</th>
                        <th>City</th>
                    </tr>
                    <tr><td>1</td><td>Alice</td><td>HR</td><td>60000</td><td>Delhi</td></tr>
                    <tr><td>2</td><td>Bob</td><td>IT</td><td>75000</td><td>Mumbai</td></tr>
                    <tr><td>3</td><td>Charlie</td><td>Sales</td><td>55000</td><td>Delhi</td></tr>
                    <tr><td>4</td><td>Diana</td><td>IT</td><td>80000</td><td>Mumbai</td></tr>
                </table>

                <h3 style="margin-top: 30px;">Try Different Fragmentations:</h3>
                <button class="demo-button" onclick="showHorizontalFrag()">Horizontal by City</button>
                <button class="demo-button" onclick="showVerticalFrag()">Vertical by Attributes</button>
                <button class="demo-button" onclick="showMixedFrag()">Mixed Fragmentation</button>
                <button class="demo-button" onclick="resetDemo()">Reset</button>

                <div class="demo-result" id="demoResult">
                    Select a fragmentation type to see the results...
                </div>
            </div>
        </div>

        <!-- Slide 11: Fragmentation Rules -->
        <div class="slide" data-slide="14">
            <h1>Fragmentation Rules & Correctness</h1>
            
            <h2>Three Fundamental Rules:</h2>
            
            <div class="example-box advantages">
                <h3 style="margin-top: 0;">1. Completeness Rule</h3>
                <p>If a relation R is decomposed into fragments R1, R2, ..., Rn, each data item in R must appear in at least one fragment Ri.</p>
                <p style="font-family: monospace; color: #667eea; margin-top: 10px;">∀ tuple t ∈ R, ∃ i: t ∈ Ri</p>
            </div>

            <div class="example-box advantages">
                <h3 style="margin-top: 0;">2. Reconstruction Rule</h3>
                <p>It must be possible to reconstruct the original relation R from its fragments.</p>
                <p><strong>Horizontal:</strong> R = R1 ∪ R2 ∪ ... ∪ Rn (UNION)</p>
                <p><strong>Vertical:</strong> R = R1 ⋈ R2 ⋈ ... ⋈ Rn (JOIN)</p>
            </div>

            <div class="example-box advantages">
                <h3 style="margin-top: 0;">3. Disjointness Rule</h3>
                <p>If a data item appears in fragment Ri, it should not appear in any other fragment Rj (i ≠ j).</p>
                <p><strong>Exception:</strong> Primary keys in vertical fragmentation (needed for reconstruction)</p>
                <p><strong>Horizontal:</strong> Ri ∩ Rj = ∅ for all i ≠ j</p>
                <p><strong>Vertical:</strong> Ri ∩ Rj = Primary Key attributes only</p>
            </div>
        </div>

        <!-- Slide 12: Advantages & Disadvantages -->
        <div class="slide" data-slide="15">
            <h1>Fragmentation: Pros & Cons</h1>
            
            <h2>Advantages:</h2>
            <div class="example-box advantages">
                <p><strong>1. Improved Performance:</strong> Parallel query execution and reduced data access time</p>
                <p><strong>2. Data Locality:</strong> Data stored close to where it's used most frequently</p>
                <p><strong>3. Reduced Communication Cost:</strong> Less data transfer across network</p>
                <p><strong>4. Enhanced Availability:</strong> System continues despite site failures</p>
                <p><strong>5. Scalability:</strong> Easy to add new sites and redistribute data</p>
                <p><strong>6. Security:</strong> Sensitive data can be isolated at secure sites</p>
                <p><strong>7. Load Distribution:</strong> Better resource utilization across sites</p>
            </div>

            <h2 style="margin-top: 30px;">Disadvantages:</h2>
            <div class="example-box disadvantages">
                <p><strong>1. Complexity:</strong> More complex query processing and optimization</p>
                <p><strong>2. Semantic Integrity:</strong> Harder to enforce constraints across fragments</p>
                <p><strong>3. Join Overhead:</strong> Reconstruction requires expensive operations</p>
                <p><strong>4. Design Difficulty:</strong> Requires careful analysis of access patterns</p>
                <p><strong>5. Maintenance Cost:</strong> Updates may affect multiple fragments</p>
                <p><strong>6. Storage Overhead:</strong> Key replication in vertical fragmentation</p>
            </div>
        </div>

        <!-- Slide 13: Fragmentation Design Process -->
        <div class="slide" data-slide="16">
            <h1>Fragmentation Design Process</h1>
            
            <h2>Step-by-Step Methodology:</h2>
            
            <div class="example-box">
                <h3 style="margin-top: 0;">Step 1: Requirements Analysis</h3>
                <p>• Identify applications and their data access patterns</p>
                <p>• Analyze query frequency and types</p>
                <p>• Determine update patterns</p>
                <p>• Consider geographic distribution of users</p>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Step 2: Quantitative Analysis</h3>
                <p>• Create attribute usage matrix</p>
                <p>• Calculate attribute affinity (for vertical fragmentation)</p>
                <p>• Analyze predicate usage (for horizontal fragmentation)</p>
                <p>• Estimate access frequencies</p>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Step 3: Fragmentation Schema Design</h3>
                <p>• Choose fragmentation type(s)</p>
                <p>• Define fragmentation predicates</p>
                <p>• Define attribute groups (for vertical fragmentation)</p>
                <p>• Decide allocation: which site stores which fragment</p>
                <p>• Decide replication: which fragments (or key directories) should be copied</p>
                <p>• Validate correctness: completeness, reconstruction, disjointness</p>
            </div>

            <div class="example-box">
                <h3 style="margin-top: 0;">Step 4: Implementation & Monitoring</h3>
                <p>• Implement fragments, global schema mappings, and access rules</p>
                <p>• Measure query latency, network cost, and update overhead</p>
                <p>• Re-tune fragmentation if access patterns change</p>
            </div>
        </div>

        <div class="slide" data-slide="17">
            <h1>Summary</h1>
            <h2>Key Takeaways</h2>
            <div class="example-box advantages">
                <p>✓ Fragmentation improves locality, parallelism, and scalability</p>
                <p>✓ Horizontal fragmentation reconstructs with <strong>UNION</strong></p>
                <p>✓ Vertical fragmentation reconstructs with <strong>JOIN</strong> and requires <strong>PK replication</strong></p>
                <p>✓ FK enforcement is easier with <strong>co-location / derived fragmentation</strong></p>
                <p>✓ University example: fragment STUDENT by <strong>campus_location</strong> across Site A/B/C</p>
            </div>
            <div style="margin-top: 40px; text-align: center;">
                <p style="font-size: 1.2em; color: #667eea; font-weight: bold;">Thank You!</p>
            </div>
        </div>
    </div>

    <div class="slide-counter"><span id="currentSlide">1</span> / <span id="totalSlides">1</span></div>

    <div class="controls">
        <button id="prevBtn" onclick="changeSlide(-1)">← Previous</button>
        <button id="nextBtn" onclick="changeSlide(1)">Next →</button>
    </div>

    <script>
        const slides = Array.from(document.querySelectorAll('.slide'));
        let currentIndex = 0;

        document.getElementById('totalSlides').textContent = slides.length;

        function showSlide(index) {
            if (index < 0) index = 0;
            if (index >= slides.length) index = slides.length - 1;

            slides.forEach((s) => s.classList.remove('active', 'prev'));

            if (index > 0) {
                slides[index - 1].classList.add('prev');
            }

            slides[index].classList.add('active');
            currentIndex = index;

            document.getElementById('currentSlide').textContent = String(currentIndex + 1);
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === slides.length - 1;
        }

        function changeSlide(direction) {
            showSlide(currentIndex + direction);
        }

        function showHorizontalFrag() {
            const el = document.getElementById('demoResult');
            el.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 10px;">Horizontal Fragmentation (by City)</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <div class="pill">Delhi Site</div>
                        <table class="table-visual">
                            <tr><th>EmpID</th><th>Name</th><th>Dept</th><th>Salary</th><th>City</th></tr>
                            <tr><td>1</td><td>Alice</td><td>HR</td><td>60000</td><td>Delhi</td></tr>
                            <tr><td>3</td><td>Charlie</td><td>Sales</td><td>55000</td><td>Delhi</td></tr>
                        </table>
                    </div>
                    <div>
                        <div class="pill">Mumbai Site</div>
                        <table class="table-visual">
                            <tr><th>EmpID</th><th>Name</th><th>Dept</th><th>Salary</th><th>City</th></tr>
                            <tr><td>2</td><td>Bob</td><td>IT</td><td>75000</td><td>Mumbai</td></tr>
                            <tr><td>4</td><td>Diana</td><td>IT</td><td>80000</td><td>Mumbai</td></tr>
                        </table>
                    </div>
                </div>
                <div style="margin-top: 10px;"><strong>Reconstruction:</strong> Employee = Delhi ∪ Mumbai</div>
            `;
        }

        function showVerticalFrag() {
            const el = document.getElementById('demoResult');
            el.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 10px;">Vertical Fragmentation (by Attributes)</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <div class="pill">Fragment 1</div>
                        <table class="table-visual">
                            <tr><th>EmpID</th><th>Name</th><th>Dept</th></tr>
                            <tr><td>1</td><td>Alice</td><td>HR</td></tr>
                            <tr><td>2</td><td>Bob</td><td>IT</td></tr>
                            <tr><td>3</td><td>Charlie</td><td>Sales</td></tr>
                            <tr><td>4</td><td>Diana</td><td>IT</td></tr>
                        </table>
                    </div>
                    <div>
                        <div class="pill">Fragment 2</div>
                        <table class="table-visual">
                            <tr><th>EmpID</th><th>Salary</th><th>City</th></tr>
                            <tr><td>1</td><td>60000</td><td>Delhi</td></tr>
                            <tr><td>2</td><td>75000</td><td>Mumbai</td></tr>
                            <tr><td>3</td><td>55000</td><td>Delhi</td></tr>
                            <tr><td>4</td><td>80000</td><td>Mumbai</td></tr>
                        </table>
                    </div>
                </div>
                <div style="margin-top: 10px;"><strong>Reconstruction:</strong> Employee = Fragment1 ⋈ Fragment2 on EmpID</div>
            `;
        }

        function showMixedFrag() {
            const el = document.getElementById('demoResult');
            el.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 10px;">Mixed Fragmentation (Vertical then Horizontal)</div>
                <div class="example-box">
                    <p><strong>Step 1 (Vertical):</strong> split Employee into (EmpID, Name, Dept) and (EmpID, Salary, City)</p>
                    <p><strong>Step 2 (Horizontal on second fragment):</strong> split (EmpID, Salary, City) by City</p>
                    <p style="font-family: monospace; color: #667eea;">E2_Delhi = σ<sub>City='Delhi'</sub>(E2), E2_Mumbai = σ<sub>City='Mumbai'</sub>(E2)</p>
                </div>
                <div style="margin-top: 10px;"><strong>Reconstruction:</strong> Join attributes first (if needed) and union the horizontal pieces according to the chosen sequence.</div>
            `;
        }

        function resetDemo() {
            const el = document.getElementById('demoResult');
            el.textContent = 'Select a fragmentation type to see the results...';
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight') changeSlide(1);
            if (e.key === 'ArrowLeft') changeSlide(-1);
        });

        showSlide(0);
    </script>
</body>
</html>